================================================================================
constants
================================================================================
A
A1
(A_A____)

::B
::BðŸ’Ž::C
::B_::C4
--------------------------------------------------------------------------------

(source_file
  (constant)
  (constant)
  (constant)
  (constant)
  (constant)
  (constant))

================================================================================
unions
================================================================================
alias AOrB = A | B

alias AOrBCOrD = A|B::C|D

alias NestedUnion = (A)|( B::C|D )

alias NestedUnion2 = A | ( B | (C | D ) | E) | ((F) | G | H)
--------------------------------------------------------------------------------

(source_file
  (alias
    name: (constant)
    type: (union_type
      (constant)
      (constant)))
  (alias
    name: (constant)
    type: (union_type
      (constant)
      (constant)
      (constant)))
  (alias
    name: (constant)
    type: (union_type
      (constant)
      (union_type
        (constant)
        (constant))))
  (alias
    name: (constant)
    type: (union_type
      (constant)
      (union_type
        (constant)
        (union_type
          (constant)
          (constant))
        (constant))
      (union_type
        (constant)
        (constant)
        (constant)))))

================================================================================
proc types
================================================================================
[] of ->
{} of -> => ->

[] of -> Int32 | String
[] of Proc(Int32 | String)

[ [] of Int32, Int32 -> String ]
[ [] of Proc(Int32, Int32, String) ]


[ {} of Int32 => Int32, Int32 -> String]
[ {} of Int32 => Proc(Int32, Int32, String)]

{ {} of Int32 => Int32, Int32 }

{ {} of Int32 => Int32, Int32 ->}
{ {} of Int32 => Proc(Int32, Int32, Nil)}

[] of Proc(Int32, Int32 -> Int32)

[] of (A -> B) -> C

def x(y : A, b); end

def x(y : A, B ->); end

alias Foo = A | B -> C | D

alias DoubleProc = -> ->
--------------------------------------------------------------------------------

(source_file
  (array
    of: (proc_type))
  (hash
    of_key: (proc_type)
    of_value: (proc_type))
  (array
    of: (proc_type
      return: (union_type
        (constant)
        (constant))))
  (array
    of: (generic_instance_type
      (constant)
      params: (param_list
        (union_type
          (constant)
          (constant)))))
  (array
    (array
      of: (proc_type
        (constant)
        (constant)
        return: (constant))))
  (array
    (array
      of: (generic_instance_type
        (constant)
        params: (param_list
          (constant)
          (constant)
          (constant)))))
  (array
    (hash
      of_key: (constant)
      of_value: (proc_type
        (constant)
        (constant)
        return: (constant))))
  (array
    (hash
      of_key: (constant)
      of_value: (generic_instance_type
        (constant)
        params: (param_list
          (constant)
          (constant)
          (constant)))))
  (tuple
    (hash
      of_key: (constant)
      of_value: (constant))
    (constant))
  (tuple
    (hash
      of_key: (constant)
      of_value: (proc_type
        (constant)
        (constant))))
  (tuple
    (hash
      of_key: (constant)
      of_value: (generic_instance_type
        (constant)
        params: (param_list
          (constant)
          (constant)
          (constant)))))
  (array
    of: (generic_instance_type
      (constant)
      params: (param_list
        (proc_type
          (constant)
          (constant)
          return: (constant)))))
  (array
    of: (proc_type
      (proc_type
        (constant)
        return: (constant))
      return: (constant)))
  (method_def
    name: (identifier)
    params: (param_list
      (param
        name: (identifier)
        type: (constant))
      (param
        name: (identifier))))
  (method_def
    name: (identifier)
    params: (param_list
      (param
        name: (identifier)
        type: (proc_type
          (constant)
          (constant)))))
  (alias
    name: (constant)
    type: (proc_type
      (union_type
        (constant)
        (constant))
      return: (union_type
        (constant)
        (constant))))
  (alias
    name: (constant)
    type: (proc_type
      return: (proc_type))))

================================================================================
proc types, continued
================================================================================
alias P2 = -> Tuple(Int8) ->
--------------------------------------------------------------------------------

(source_file
  (alias
    name: (constant)
    type: (proc_type
      (proc_type
        return: (generic_instance_type
          (constant)
          params: (param_list
            (constant)))))))

================================================================================
proc ambiguity resolution
================================================================================
def p1 : ->{1=>1}; end
def p2 : ->{Int32}; end
def p2 : ->{Int32,}; end

def p3 : ->(Int32.to_s); end
def p4 : ->(Int32.class); end
--------------------------------------------------------------------------------

(source_file
  (method_def
    name: (identifier)
    type: (proc_type)
    (hash
      (hash_entry
        (integer)
        (integer))))
  (method_def
    name: (identifier)
    type: (proc_type)
    (tuple
      (constant)))
  (method_def
    name: (identifier)
    type: (proc_type
      return: (tuple_type
        (constant))))
  (method_def
    name: (identifier)
    type: (proc_type)
    (call
      receiver: (constant)
      method: (identifier)))
  (method_def
    name: (identifier)
    type: (proc_type
      return: (class_type
        (constant)))))

================================================================================
tuple types
================================================================================
alias Foo1 = {Int32}
alias Foo2 = {Int32, Int32}

-> : {Int32, Proc(Int32)} { {1, -> {1}} }

-> : Int32, Int32 -> { ->, ->} do  end
--------------------------------------------------------------------------------

(source_file
  (alias
    name: (constant)
    type: (tuple_type
      (constant)))
  (alias
    name: (constant)
    type: (tuple_type
      (constant)
      (constant)))
  (proc
    type: (tuple_type
      (constant)
      (generic_instance_type
        (constant)
        params: (param_list
          (constant))))
    block: (block
      (tuple
        (integer)
        (proc
          block: (block
            (integer))))))
  (proc
    type: (proc_type
      (constant)
      (constant)
      return: (tuple_type
        (proc_type)
        (proc_type)))
    block: (block)))

================================================================================
generic types
================================================================================
class Gen(*U)
end

alias Foo = Gen()
alias Foo2 = Gen(Int32)
alias Foo3 = Gen(Int32,)
alias Foo4 = Gen(Int32,String)
alias Foo5 = Gen(Int32,String|Char)
--------------------------------------------------------------------------------

(source_file
  (class_def
    name: (generic_type
      (constant)
      params: (param_list
        (splat
          (constant)))))
  (alias
    name: (constant)
    type: (generic_instance_type
      (constant)))
  (alias
    name: (constant)
    type: (generic_instance_type
      (constant)
      params: (param_list
        (constant))))
  (alias
    name: (constant)
    type: (generic_instance_type
      (constant)
      params: (param_list
        (constant))))
  (alias
    name: (constant)
    type: (generic_instance_type
      (constant)
      params: (param_list
        (constant)
        (constant))))
  (alias
    name: (constant)
    type: (generic_instance_type
      (constant)
      params: (param_list
        (constant)
        (union_type
          (constant)
          (constant))))))

================================================================================
generic classes, etc.
================================================================================
class Foo(*T)
  getter content

  def initialize(*@content : *T)
  end
end
--------------------------------------------------------------------------------

(source_file
  (class_def
    name: (generic_type
      (constant)
      params: (param_list
        (splat
          (constant))))
    (call
      method: (identifier)
      arguments: (argument_list
        (identifier)))
    (method_def
      name: (identifier)
      params: (param_list
        (splat_param
          name: (instance_var)
          type: (splat_type
            (constant)))))))

================================================================================
splat types
================================================================================
def foo : {*{Int32 | Int8}}
end

alias Foo = {*{Int32 | Int8, Int8}}

alias Bar = {Char, *Foo, String}

# TODO
# c : *Char | String = "c"
--------------------------------------------------------------------------------

(source_file
  (method_def
    name: (identifier)
    type: (tuple_type
      (splat_type
        (tuple_type
          (union_type
            (constant)
            (constant))))))
  (alias
    name: (constant)
    type: (tuple_type
      (splat_type
        (tuple_type
          (union_type
            (constant)
            (constant))
          (constant)))))
  (alias
    name: (constant)
    type: (tuple_type
      (constant)
      (splat_type
        (constant))
      (constant)))
  (comment)
  (comment))
